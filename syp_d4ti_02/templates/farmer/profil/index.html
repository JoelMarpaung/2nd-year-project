{% extends 'farmer/base.html' %}
<title>Farmer | Dashboard</title>
{% load staticfiles %}
{% block body_block %}
<!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
  <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        Profil Petani      
      </h1>
      {% if messages %}
  <ul class="messages">
    {% for message in messages %}
      <li class="{{ message.tags }}">{{ message }}</li>
    {% endfor %}
  </ul>
{% endif %}
    </section>
    <!-- Main content -->
    <section class="content">
    	<section class="content">      
      <div class="col-md-12">
          <!-- Horizontal Form -->
          <div class="box box-info">
            <div class="box-header with-border">
              <h3 class="box-title">Berikut adalah profil dari akun petani</h3>
            </div>
            <!-- /.box-header -->
            <!-- form start -->            
              <div class="box-body">
                <div class="form-group">
                  <label  class="col-sm-2 control-label">Foto Profil</label>

                  <div class="col-sm-10">                    
                    <div class="user-panel">
                      <img src="{% static farmer.photo %}" class="img-circle" alt="User Image" width=20%>
                      
                    </div>
                  </div>
                  &nbsp; &nbsp; &nbsp;<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#fotoModal"><i class="fa fa-gear"></i> Ganti Foto</button> 
                </div>
<!-- Modal -->
<div id="fotoModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Form Ganti Foto</h4>
      </div>
      <div class="modal-body">
      <form class="form-horizontal" role="form" action="/ganti-foto/" method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="form-group">
                  <label  class="col-sm-2 control-label">Ganti Foto Profil</label>

                  <div class="col-sm-10">
                    <input type="file" class="form-control" name="photo" required>
                  </div>
                </div>
                <div class="box-footer">
                <button type="reset" class="btn btn-default">Reset</button>
                <button type="submit" class="btn btn-primary pull-right">Ganti</button>
              </div>
              <!-- /.box-footer -->
            </form>
                   
      </div>      
    </div>

  </div>
</div>



                <div class="form-group">
                  <label  class="col-sm-2 control-label">Username</label>

                  <div class="col-sm-10">
                    <p>{{ farmer.username }}</p>
                  </div>
                </div>
                <div class="form-group">
                  <label  class="col-sm-2 control-label">Nama Lengkap</label>

                  <div class="col-sm-10">
                    <p>{{ farmer.full_name }}</p>
                  </div>
                </div>
                <div class="form-group">
                  <label  class="col-sm-2 control-label">No. Telepon</label>

                  <div class="col-sm-10">
                    <p>{{ farmer.phone }}</p>
                  </div>
                </div>
                <div class="form-group">
                  <label  class="col-sm-2 control-label">Kabupaten</label>

                  <div class="col-sm-10">
                    <p>{{ farmer.kabupaten }}</p>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label">Kecamatan</label>

                  <div class="col-sm-10">
                    <p>{{ farmer.kecamatan }}</p>
                  </div>
                </div>                
                <div class="form-group">
                  <label class="col-sm-2 control-label">Alamat</label>

                  <div class="col-sm-10">
                    <p>{{ farmer.alamat }}</p>
                  </div>
                </div>                

&nbsp; &nbsp; &nbsp;<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#dataModal"><i class="fa fa-gear"></i> Ubah Data Diri</button> &nbsp; &nbsp; &nbsp;<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#passwordModal"><i class="fa fa-exchange"></i> Ubah Password</button> 
                </div>
<!-- Modal -->
<div id="dataModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Form Ubah Data Diri</h4>
      </div>
      <div class="modal-body">
      <form class="form-horizontal" role="form" action="/ganti-profil/" method="POST">
      {% csrf_token %}
      <div class="form-group">
        <label  class="col-sm-2 control-label">Nama Lengkap</label>

        <div class="col-sm-10">
        <input type="text" class="form-control" value="{{ farmer.full_name }}" name="full_name" placeholder="nama lengkap" required>
        </div>
      </div>
      <div class="form-group">
        <label  class="col-sm-2 control-label">Nomor Telepon</label>

        <div class="col-sm-10">
        <input type="text" class="form-control" value="{{ farmer.phone }}" name="phone" placeholder="nomor telepon" required>
        </div>
      </div>
      <div class="form-group">
        <label  class="col-sm-2 control-label">Kabupaten</label>

        <div class="col-sm-10">
        <input type="text" class="form-control" value="{{ farmer.kabupaten }}" name="kabupaten" placeholder="kabupaten" required>
        </div>
      </div>
      <div class="form-group">
        <label  class="col-sm-2 control-label">Kecamatan</label>

        <div class="col-sm-10">
        <input type="text" class="form-control" value="{{ farmer.kecamatan }}" name="kecamatan" placeholder="kecamatan" required min-length=5>
        </div>
      </div>
      <div class="form-group">
        <label  class="col-sm-2 control-label">Alamat</label>

        <div class="col-sm-10">
        <textarea class="form-control" name="alamat" placeholder="alamat" required>{{ farmer.full_name }}</textarea>
        </div>
      </div>
                <div class="box-footer">
                <button type="reset" class="btn btn-default">Reset</button>
                <button type="submit" class="btn btn-primary pull-right">Ganti</button>
              </div>
              <!-- /.box-footer -->
            </form>
                   
      </div>      
    </div>

  </div>
</div>


<!-- Modal -->
<div id="passwordModal" class="modal fade" role="dialog">
  <div class="modal-dialog">
<script type="text/javascript">

  function checkForm(form)
  {
    if(form.password1.value != "" && form.password1.value == form.password2.value) {
    } else {
      alert("Error: Password anda tidak sesuai. Silahkan di cek kembali");
      form.password1.focus();
      return false;
    }
    return true;
  }

</script>
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Form Ubah Password</h4>
      </div>
      <div class="modal-body">
      <form class="form-horizontal" role="form" action="/ganti-password/" method="POST" onsubmit="return checkForm(this);">
      {% csrf_token %}
      <div class="form-group">
        <label  class="col-sm-3 control-label">Password Lama</label>

        <div class="col-sm-9">
        <input type="password" class="form-control" name="old_password" placeholder="Masukkan Password Lama" required>
        </div>
      </div>
      <div class="form-group">
        <label  class="col-sm-3 control-label">Password Baru</label>

        <div class="col-sm-9">
        <input type="password" class="form-control" name="password1" placeholder="Masukkan Password Baru" required minlength=8>
        </div>
      </div>
      <div class="form-group">
        <label  class="col-sm-3 control-label">Password Kembali</label>

        <div class="col-sm-9">
        <input type="password" class="form-control" name="password2" placeholder="Masukkan Password Kembali" required minlength=8>
        </div>
      </div>
                <div class="box-footer">
                <button type="reset" class="btn btn-default">Reset</button>
                <button type="submit" class="btn btn-primary pull-right">Ganti</button>
              </div>
              <!-- /.box-footer -->
            </form>
                   
      </div>      
    </div>

  </div>
</div>

              </div>
              </div>                        
    </section>	
{% endblock %}

